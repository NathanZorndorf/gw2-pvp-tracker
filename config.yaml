# GW2 PvP Tracker Configuration

# Screen Capture
screen:
  monitor: 0  # Primary monitor
  capture_delay: 0.5  # Seconds to wait after hotkey press

# Computer Vision
cv:
  template_match_threshold: 0.7
  highlight_hsv_lower: [20, 50, 50]
  highlight_hsv_upper: [40, 255, 255]
  profession_match_threshold: 0.6
  scales: [0.8, 0.9, 1.0, 1.1, 1.2]

# OCR Settings
ocr:
  engine: "easyocr"  # "easyocr" (recommended) or "tesseract"
  tesseract_path: "C:/Program Files/Tesseract-OCR/tesseract.exe"  # Windows default
  name_psm: 7  # Single line mode (tesseract only)
  score_psm: 7
  score_whitelist: "0123456789"
  name_whitelist: "AÀÁÂÃÄÅÆBCÇDÐEÈÉÊËFGHIÌÍÎÏJKLMNÑOÒÓÔÕÖØŒPQRSẞTUÙÚÛÜVWXYÝŸZaàáâãäåæbcçdðeèéêëfghiìíîïjklmnñoòóôõöøœpqrsßtuùúûüvwxyýÿzZABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyzÁáÉéÍíÓóÚúÀàÈèÌìÒòÙùÄäËëÏïÖöÜüÇçÑñæ. "
  use_clahe: true  # CLAHE contrast enhancement (recommended for EasyOCR)
  resize_factor: 2.0  # Scale factor for OCR preprocessing

# Fuzzy Matching
fuzzy:
  name_match_threshold: 80  # 0-100

# Arena Type Detection Region (from arena_type_bounding_boxes.csv)
arena_type_detection:
  x: 1240
  y: 408
  width: 205
  height: 67

# Database
database:
  path: "data/pvp_tracker.db"
  backup_on_startup: true

# Hotkeys
hotkeys:
  match_start: "F8"
  match_end: "F9"
  exit: "esc"

# Paths
paths:
  templates: "templates/"
  screenshots: "screenshots/"
  logs: "logs/"

# Logging
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  file: "logs/app.log"
  max_size_mb: 10
  backup_count: 5

# UI
ui:
  console_width: 60
  show_ascii_art: true
  color_enabled: true

  # Win Rate Overlay Settings
  overlay:
    enabled: true           # Show overlay on F8
    style: "popup"          # "popup" (centered dialog)
    width: 420              # Window width in pixels
    auto_close_on_f9: true  # Close overlay when match ends
    show_on_f8: true        # Show overlay when F8 is pressed

# Roster Region Coordinates (Based on 3840x2160 4K full screen images)
# NOTE: These are for 4K resolution. For 1080p, divide all values by 2.
# Configuration derived from source CSVs (unranked-start-bounding-boxes.csv, ranked-start-bounding-boxes.csv, etc.)
roster_regions:
  # Default arena type to use if auto-detection fails
  default_arena: "unranked"

  # Unranked Arena bounding boxes (from unranked-start-bounding-boxes.csv)
  unranked:
    red_team_names:
      x_start: 1200
      x_end: 1803
      y_start: 712
      row_height: 58
      num_players: 5

    blue_team_names:
      x_start: 2038
      x_end: 2656
      y_start: 710
      row_height: 58
      num_players: 5

    red_score_box:
      x: 1702
      y: 588
      width: 207
      height: 109

    blue_score_box:
      x: 1939
      y: 588
      width: 211
      height: 109

    arena_type_box:
      x: 1240
      y: 443
      width: 216
      height: 67

    icon_regions:
      red_team:
        x: 1125
        y: 711
        width: 73
        height: 291
      blue_team:
        x: 2654
        y: 710
        width: 66
        height: 291

  # Ranked Arena bounding boxes (from ranked-start-bounding-boxes.csv / ranked-end-bounding-boxes.csv)
  ranked:
    red_team_names:
      x_start: 1192
      x_end: 1799
      y_start: 682
      row_height: 58
      num_players: 5

    blue_team_names:
      x_start: 2055
      x_end: 2670
      y_start: 678
      row_height: 58
      num_players: 5

    red_score_box:
      x: 1760
      y: 555
      width: 152
      height: 111

    blue_score_box:
      x: 1944
      y: 555
      width: 144
      height: 111

    arena_type_box:
      x: 1235
      y: 412
      width: 197
      height: 70

    icon_regions:
      red_team:
        x: 1124
        y: 680
        width: 74
        height: 290
      blue_team:
        x: 2653
        y: 680
        width: 71
        height: 292

# Profession Detection Settings
profession_detection:
  enabled: true
  reference_icons_path: "data/reference-icons/icons-white"
  confidence_threshold: 0.2  # Low threshold - template matching scores range 0.2-0.8, many correct matches are 0.3-0.5
  preprocessing:
    clahe_clip: 1.0
    clahe_tile: [2, 2]
    canny_min: 50
    canny_max: 150

# Debug Settings
debug:
  save_regions: true      # Save extracted regions as images for debugging
  output_dir: "data/debug"  # Directory for debug images

# Bold Text Detection Settings
bold_detection:
  method: "composite"  # composite, stroke_width, edge_density, brightness
  stroke_width_weight: 0.4
  edge_density_weight: 0.3
  brightness_weight: 0.3
  confidence_threshold: 0.15  # Minimum difference to consider bold (0.0-1.0)
